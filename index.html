<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M…ôry…ôm √º√ß√ºn Sevgi Oyunu</title>
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fce4ec, #e91e631a);
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            text-align: center;
            max-width: 90%;
        }

        h1 {
            color: #e91e63;
            margin-bottom: 20px;
        }

        #status-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background-color: #f8f8f8;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: bold;
            color: #c2185b;
            font-size: 1.1em;
        }

        #gameCanvas {
            border: 5px solid #c2185b; /* Oyun √ß…ôr√ßiv…ôsi */
            background-color: #ffffff;
            border-radius: 10px;
            display: block;
            margin: 0 auto;
        }

        /* M√ºkafat B√∂lm…ôsi Stili */
        #rewardSection {
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #ff9800;
            border-radius: 15px;
            background-color: #fffde7;
        }

        #rewardSection h2 {
            color: #ff9800;
        }

        #showPhotosButton {
            background-color: #e91e63;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.1em;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s;
        }

        #showPhotosButton:hover {
            background-color: #c2185b;
        }

        #photoGallery {
            margin-top: 20px;
            display: flex;
            flex-direction: column; 
            gap: 15px;
            align-items: center;
        }

        #photoGallery img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .hidden {
            display: none;
        }

        .mobile-note {
            font-style: italic;
            color: #888;
            margin-top: 10px;
        }

        .heart {
             color: #e91e63;
             font-size: 1.4em;
             display: inline-block;
             animation: beat 1s infinite alternate;
        }
        @keyframes beat {
            0% { transform: scale(1); }
            100% { transform: scale(1.15); }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>M…ôry…ôm √º√ß√ºn Sevgi Oyunu <span class="heart">üíñ</span></h1>
        
        <div id="status-bar">
            <span>Yeyil…ôn Alma: <span id="score">0</span> / 10</span>
            <span id="message">Ba≈ülamaq √º√ß√ºn ist…ônil…ôn ox d√ºym…ôsin…ô basƒ±n!</span>
        </div>

        <canvas id="gameCanvas" width="400" height="400"></canvas>

        <div id="rewardSection" class="hidden">
            <h2>üéâ T∆èBRƒ∞KL∆èR! UƒûURLA QAZANDIN! üéâ</h2>
            <p>S…ôn oyunu ustalƒ±qla bitirdin! ƒ∞ndi m√ºkafatƒ±nƒ± al!</p>
            <button id="showPhotosButton">M√ºkafat ≈û…ôkill…ôrimiz…ô Bax</button>
            <div id="photoGallery" class="hidden">
                <img src="meryem_photo1.jpeg" alt="X√ºsusi ≈û…ôkil 1">
                <img src="meryem_photo2.jpeg" alt="X√ºsusi ≈û…ôkil 2">
                <img src="meryem_photo3.jpeg" alt="X√ºsusi ≈û…ôkil 3">
                <p class="mobile-note">Telefonunuzdan rahat baxa bil…ôrsiniz. Sad…ôc…ô skroll edin!</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            const scoreElement = document.getElementById('score');
            const messageElement = document.getElementById('message');
            const rewardSection = document.getElementById('rewardSection');
            const showPhotosButton = document.getElementById('showPhotosButton');
            const photoGallery = document.getElementById('photoGallery');

            // Oyun parametrl…ôri
            const tileSize = 20;
            const tileCount = canvas.width / tileSize;
            const maxScore = 10; // Q…ôl…ôb…ô √º√ß√ºn h…ôd…ôf alma sayƒ± (D∆èYƒ∞≈ûDƒ∞Rƒ∞LDƒ∞)

            let snake = [];
            let food = {};
            let dx = 0; // x istiqam…ôtind…ô s√ºr…ôt
            let dy = 0; // y istiqam…ôtind…ô s√ºr…ôt
            let score = 0;
            let gameLoop;
            let isGameRunning = false;

            // PNG Obrazƒ± v…ô Alma PNG-si √º√ß√ºn d…ôyi≈ü…ônl…ôr. Yollar ki√ßik h…ôrfl…ôr…ô d…ôyi≈üdirildi.
            const characterImage = new Image();
            characterImage.src = 'meryem.png'; 
            
            const foodImage = new Image();
            foodImage.src = 'alma.png'; 

            // Oyunu ba≈ülatmaq funksiyasƒ±
            function initGame() {
                snake = [{ x: 10, y: 10 }];
                dx = 0;
                dy = 0;
                score = 0;
                scoreElement.textContent = score;
                rewardSection.classList.add('hidden');
                photoGallery.classList.add('hidden');
                messageElement.textContent = "Ba≈ülamaq √º√ß√ºn ist…ônil…ôn ox d√ºym…ôsin…ô basƒ±n!";
                
                drawBackground(); 
                placeFood();
                drawFood();
                drawSnake();
                isGameRunning = false;
                clearInterval(gameLoop);
            }

            // Oyun sah…ôsini √ß…ôkir
            function drawBackground() {
                ctx.fillStyle = "#f0f0f0";
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }

            // ƒ∞lanƒ± (PNG-nizi) √ß…ôkir
            function drawSnake() {
                snake.forEach((segment, index) => {
                    // YALNIZ ƒ∞lanƒ±n Ba≈üƒ± (Sizin Obrazƒ±nƒ±z) √º√ß√ºn PNG-d…ôn istifad…ô edirik
                    if (index === 0 && characterImage.complete && characterImage.naturalWidth > 0) {
                        ctx.drawImage(characterImage, segment.x * tileSize, segment.y * tileSize, tileSize, tileSize);
                    } else {
                        // ƒ∞lanƒ±n qalan hiss…ôl…ôri √º√ß√ºn sad…ô r…ôngli kvadrat (v…ô ya PNG y√ºkl…ônm…ôyibs…ô)
                        ctx.fillStyle = index === 0 ? '#e91e63' : '#f06292'; // Ba≈ü √º√ß√ºn qƒ±rmƒ±zƒ±, qalanƒ± √º√ß√ºn √ß…ôhrayƒ±
                        ctx.fillRect(segment.x * tileSize, segment.y * tileSize, tileSize, tileSize);
                        ctx.strokeStyle = '#c2185b';
                        ctx.strokeRect(segment.x * tileSize, segment.y * tileSize, tileSize, tileSize);
                    }
                });
            }

            // Yem…ôyi (Almanƒ±) yerl…ô≈üdirir
            function placeFood() {
                food = {
                    x: Math.floor(Math.random() * tileCount),
                    y: Math.floor(Math.random() * tileCount)
                };
                if (snake.some(segment => segment.x === food.x && segment.y === food.y)) {
                    placeFood();
                }
            }

            // Yem…ôyi √ß…ôkir (PNG)
            function drawFood() {
                 // PNG y√ºkl…ônibs…ô v…ô √∂l√ß√ºs√º varsa
                 if (foodImage.complete && foodImage.naturalWidth > 0) {
                     ctx.drawImage(foodImage, food.x * tileSize, food.y * tileSize, tileSize, tileSize);
                 } else {
                     // PNG y√ºkl…ônm…ôyibs…ô sad…ô dair…ô √ß…ôk (fallback)
                     ctx.fillStyle = '#ff9800';
                     ctx.beginPath();
                     ctx.arc(food.x * tileSize + tileSize / 2, food.y * tileSize + tileSize / 2, tileSize / 2, 0, 2 * Math.PI);
                     ctx.fill();
                 }
            }

            // ƒ∞lanƒ±n h…ôr…ôk…ôti v…ô m…ôntiq
            function moveSnake() {
                if (dx === 0 && dy === 0) return;

                const head = { x: snake[0].x + dx, y: snake[0].y + dy };

                // 1. √ñl√ºm Yoxlamasƒ±
                if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount || 
                    snake.some((segment, index) => index > 0 && segment.x === head.x && segment.y === head.y)) {
                    
                    clearInterval(gameLoop);
                    messageElement.textContent = "üíî Oyun Bitdi! Bir daha c…ôhd edin.";
                    isGameRunning = false;
                    return;
                }

                snake.unshift(head);

                // 2. Yem…ôk Yoxlamasƒ±
                if (head.x === food.x && head.y === food.y) {
                    score++;
                    scoreElement.textContent = score;

                    if (score >= maxScore) {
                        // Q…ôl…ôb…ô!
                        clearInterval(gameLoop);
                        messageElement.textContent = "üèÜ Q∆èL∆èB∆è! M…ôry…ômin Q…ôhr…ômanƒ±san!";
                        rewardSection.classList.remove('hidden');
                        isGameRunning = false;
                        return;
                    }

                    placeFood();
                } else {
                    snake.pop();
                }
                
                // 3. Yenid…ôn √ß…ôk
                drawBackground();
                drawFood();
                drawSnake();
            }

            // H…ôr…ôk…ôt…ô n…ôzar…ôt
            document.addEventListener('keydown', changeDirection);

            function changeDirection(event) {
                const keyPressed = event.key;
                const LEFT_KEY = 'ArrowLeft';
                const RIGHT_KEY = 'ArrowRight';
                const UP_KEY = 'ArrowUp';
                const DOWN_KEY = 'ArrowDown';

                const goingUp = dy === -1;
                const goingDown = dy === 1;
                const goingRight = dx === 1;
                const goingLeft = dx === -1;

                if (!isGameRunning && (keyPressed === UP_KEY || keyPressed === DOWN_KEY || keyPressed === LEFT_KEY || keyPressed === RIGHT_KEY)) {
                    isGameRunning = true;
                    messageElement.textContent = "Oyun davam edir...";
                    gameLoop = setInterval(moveSnake, 150); // Oyun s√ºr…ôti
                }

                // ƒ∞stiqam…ôt d…ôyi≈üikliyi
                if (keyPressed === LEFT_KEY && !goingRight) { dx = -1; dy = 0; }
                else if (keyPressed === UP_KEY && !goingDown) { dx = 0; dy = -1; }
                else if (keyPressed === RIGHT_KEY && !goingLeft) { dx = 1; dy = 0; }
                else if (keyPressed === DOWN_KEY && !goingUp) { dx = 0; dy = 1; }
            } 

            // M√ºkafat d√ºym…ôsinin funksionallƒ±ƒüƒ±
            showPhotosButton.addEventListener('click', () => {
                photoGallery.classList.toggle('hidden');
                showPhotosButton.textContent = photoGallery.classList.contains('hidden') ? "M√ºkafat ≈û…ôkill…ôrimiz…ô Bax" : "≈û…ôkill…ôri Gizl…ôt";
            });


            // Oyunu ilkin v…ôziyy…ôtd…ô qur (PNG y√ºkl…ônm…ôsini g√∂zl…ôyir)
            let imagesLoaded = 0;
            const totalImages = 2; // characterImage v…ô foodImage

            function imageLoaded() {
                imagesLoaded++;
                if (imagesLoaded === totalImages) {
                     initGame();
                }
            }

            // PNG-l…ôrin y√ºkl…ônm…ôsini yoxla
            characterImage.onload = imageLoaded;
            foodImage.onload = imageLoaded;
            
            // X…ôta halƒ±nda (fayl tapƒ±lmadƒ±qda) yen…ô d…ô oyunu ba≈ülamaq √º√ß√ºn ehtiyat (fallback)
            characterImage.onerror = () => { imageLoaded(); console.warn("Character PNG y√ºkl…ônm…ôdi!"); };
            foodImage.onerror = () => { imageLoaded(); console.warn("Food PNG y√ºkl…ônm…ôdi!"); };

            // Maksimum 2 saniy…ô g√∂zl…ôdikd…ôn sonra y√ºkl…ônm…ôs…ô bel…ô oyunu ba≈ülat
            setTimeout(() => {
                if (!isGameRunning) initGame();
            }, 2000);

        }); 
    </script>
</body>
</html>
